var karbon=function(e){"use strict";var n,t,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done)&&(t.push(l.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},a=function(e){return void 0===e},s=function(e){return void 0!==e},c=function(e){return null===e},d=function(e){return null!==e},u=function(e){return a(e)||c(e)},p=function(e){return null!==e&&void 0!==e},f=function(e){return""!==e},h=function(e){return"function"==typeof e},v=function(e){return"object"===(void 0===e?"undefined":o(e))},g=Array.isArray,y=function(e){return"number"==typeof e},m=function(e){return"string"==typeof e},k=function(e){return e instanceof Promise},b=function(){return"object"===("undefined"==typeof window?"undefined":o(window))},w=function(e){for(var n in e)delete e[n]},A=function(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0},C=Object.keys,S=Object.prototype.hasOwnProperty,N=function e(n,t){if(n===t)return!0;if(n&&t&&"object"==(void 0===n?"undefined":o(n))&&"object"==(void 0===t?"undefined":o(t))){var r=g(n),i=g(t),l=void 0,a=void 0,s=void 0;if(r&&i){if((a=n.length)!=t.length)return!1;for(l=a;0!=l--;)if(!e(n[l],t[l]))return!1;return!0}var c=C(n);if((a=c.length)!==C(t).length)return!1;for(l=a;0!=l--;)if(!S.call(t,c[l]))return!1;for(l=a;0!=l--;)if(!e(n[s=c[l]],t[s]))return!1;return!0}return n!=n&&t!=t},O=(n=!1,t=!0,r=!1,{isInitialized:function(){return n},setInitialized:function(e){return n=e},requiresSync:function(){return t},setSync:function(e){return t=e},constrainDomUpdates:function(e){return r=e},getDomUpdatesLimit:function(){return r}}),x=function(e,n){var t,r,o,i,f,v,m,b=void 0,w=0,A={},C={},S=void 0,N=function(e){b=e},x=function(){return b},T=(t=null,r=null,o=null,i=void 0,f=void 0,v=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t=null,o=Object.assign({},f),w++;var l=(i||Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10))+"_"+w;return f=void 0,i=void 0,setTimeout(function(){j(l,n,o)},0),{done:m(l)}},m=function(e){return function(n){c(t)?C[e]=n:(delete A[e],n(t,r,o))}},{stamp:function(e){return i=e.id,f=e.cache,{msgs:v}},messages:v,setCallbackData:function(e,n,i){t=e,r=n,o=i}}),j=function(e,n,t){A[e]=[];for(var r=1;r<n.length;r++)A[e][r-1]=n[r];P(e,n[0],S,t)},L=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments[3];if(s(n))if(A[n].length>0)P(n,A[n].shift(),e,r);else if(delete A[n],h(C[n])){var o=Object.assign({},C);delete C[n],o[n](e,t,r)}else T.setCallbackData(e,t,r)},P=function(e,n,t,r){var o=h(n)?p(t)?n("undefined"===t?void 0:t,x(),r):n(x(),r):n;if(c(o))L(null,e,S,r);else if(a(o))L("undefined",e,S,r);else{var i=o[1],d=o[2]||{};switch(o[0]){case"state":d.fixedDomShape?O.setSync(!1):O.setSync(!0),s(d.maxDomUpdates)?O.constrainDomUpdates(d.maxDomUpdates):O.constrainDomUpdates(!1),D(i,e,!!d.preventRender,r);break;case"effect":var u=i.cache,f=i.name||i.def,v=h(f)?f:function(){return console.warn("Effect '"+f+"' is not a function.")},m=g(i.args)?v.apply(void 0,l(i.args)):v(i.args);k(m)?Promise.resolve(m).then(function(n){s(u)&&(r[u]=n),L(n,e,S,r)}).catch(function(n){s(u)&&(r[u]=n),L({error:!0,errorMsg:n},e,S,r)}):"_break_"===m?A[e]=[]:(s(u)&&(r[u]=m),L(m,e,S,r));break;case"pipe":var b=i,w=b[0],N=null;if(b.length<2)N=w;else for(var T=1;T<b.length;T++)N=1===T?b[T](w):b[T](N);L(N,e,S,r);break;case"control":var j=!!i.if,P=g(i[j]),E=P?i[j][0]:i[j],R=P?i[j][1]:null,V=P?i[j][2]:null,H=i.cache,M=!1;R?"continue"===R?y(V)&&(A[e].length=V):"skip"===R&&V?y(V)&&A[e].splice(0,V):"break"===R&&(A[e]=[],delete C[e]):j?M=!0:A[e]=[],s(H)&&(r[H]=E),L(E,e,M,r);break;case"cancel":var B=function(e){var n=!1;for(var t in A)0===t.indexOf(e)&&(n=!0,A[t]=[],delete C[t]);if(!n)for(var r in C)0===r.indexOf(e)&&delete C[r]},K=i.id;if(s(K)){if(g(K))for(var U=0;U<K.length;U++)B(K);else B(K);L(void 0,e)}}}},E=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(a(t))N(r);else if(2==t.length){if("default"===o)return e(n[t[0]],t.slice(1),r,o,i,l);var s=n[t[0]];if(u(s))throw new Error('Karbon - cannot modify undefined array "'+t[0]+'".');if("splice"===o){var c=t[1];if(i>1){var p=[c,l];if(g(r))for(var f=0;f<r.length;f++)p[p.length]=h(r[f])?r(s):r[f];else for(var v=0;v<i;v++)p[p.length]=h(r)?r(s):r;s.splice.apply(s,p)}else if(d(r))s.splice(c,l,h(r)?r(s):r);else{if(u(s[c]))throw new Error('Karbon - cannot remove. Array "'+t[0]+'" does not contain item at position "'+c+'".');s.splice(c,l)}}else if("delete"===o){var y=t[1];if(u(s[y]))throw new Error('Karbon - cannot delete undefined obj key "'+y+"\". Check that it wasn't removed in a previous action.");delete s[y]}}else{if(1!=t.length)return 0==t.length?n:e(n[t[0]],t.slice(1),r,o,i,l);var m=t[0];if(g(m))for(var k=0;k<m.length;k++)g(r)?n[m[k]]=h(r[k])?r(n[m[k]]):r[k]:n[m[k]]=h(r)?r(n[m[k]]):r;else n[m]=h(r)?r(n[m]):r}},D=function(t,r,o,i){var l=g(t)?[]:s(t.path)?t.path[0]:void 0;if(g(t))for(var a=0;a<t.length;a++){var c=t[a];E(b,c.path,c.value,c.action,c.add,c.remove),l[a]=c.path[0]}else E(b,t.path,t.value,t.action,t.add,t.remove);e.runHandleSubs(n),o?L(S,r,S,i):e.reRender(l,r,n,i)};return{setState:N,getState:x,exeQueuedMsgs:L,forceReRender:function(t){O.setSync(!0),e.reRender(void 0,void 0,n,void 0,t)},stamp:T.stamp,messages:T.messages}},T={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,animate:!0,animateTransform:!0,circle:!0,"color-profile":!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComposite:!0,feConvolveMatrix:!0,feDisplacementMap:!0,feDistantLight:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMergeNode:!0,feMorphology:!0,feOffset:!0,fePointLight:!0,feSpotLight:!0,feTile:!0,feTurbulence:!0,"font-face-name":!0,image:!0,line:!0,mpath:!0,path:!0,polygon:!0,polyline:!0,set:!0,stop:!0,use:!0,view:!0,rect:!0},j=function(e,n){var t=[],r=[],o=[],i=[],l={},d={},u={},p={},f=[],v=!1,y=void 0,m=void 0,A=!1,C=void 0,S=void 0,N=void 0,O=1,x=!1,j=0,L=void 0,P=function(e){O--,"svg"!==e&&"/svg"!==e||(x=!1)},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:!1,staticChildren:!1},d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments[4];if("svg"===e&&(x=!0),m=a.key,A=!!m,N=function(e,n,t,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments[5],l=arguments[6],a=arguments[7],s=arguments[8],d=arguments[9],u=arguments[10],p=arguments[11],f={},h=Object.keys(t),v=0;v<h.length;v++){var g=h[v],y=t[g];f[g]=c(y)?"":"innerHTML"!==g?y:'<span data="dangerously-set-innerHTML">'+y+"</span>"}return{type:e,lang:s?"xml":"html",props:f,level:r,key:o,staticChildren:i,keyedAction:null,keyedChildren:null,parentComponent:l,parentComponentIndex:n,subscribesTo:a,dom:null,block:d,blockProps:u,blockChild:p}}(e,o[o.length-1],n,O,m,a.staticChildren,r[r.length-1],i[i.length-1],x,d,u,!1),"creatingHydrationLayer"===L&&Object.keys(N.props).map(function(e){"o"===e[0]&&"n"===e[1]&&(N.props[e]="")}),v)return f[f.length]=N,void(T[e]||O++);t[t.length]=N,s(S)&&(O>C?(S.keyedChildren[S.keyedChildren.length]=N,N.block&&(S.blockChild=!0)):O===C&&(S=void 0,C=void 0)),A&&(C=O,S=N,N.keyedChildren=[],l[m]=N),T[e]||O++},D=function t(l){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(l)&&(c=l[1]||{},l=l[0]);var u=Object.keys(l)[0],p=l[u],f=c.index||0;r[r.length]=u,o[o.length]=f;var h=void 0,v=c.actions;if(s(v)){h={},v=g(v)?v:[v];for(var y=0;y<v.length;y++){var m=v[y],k=Object.keys(m)[0];s(d[k])?h[k]=d[k]:(h[k]=m[k]({stamp:e.stamp,msgs:e.messages}),d[k]=h[k])}}i[i.length]=a(c.subscribe)||"all"===c.subscribe?Object.keys(e.getState()):c.subscribe;var b=s(c.mergeStateToProps)?c.mergeStateToProps(e.getState()):void 0;p(s(b)?Object.assign({},c.props,b):c.props,s(h)||s(n)?Object.assign({},h,n):void 0,f)(E,P,{component:t,lazy:R,block:V}),i.length=i.length-1,r.length=r.length-1,o.length=o.length-1},R=function(n,t,r,o,i){var l=n.toString().replace(/ /g,""),a="creatingHydrationLayer"===L;if("error"===u[l])h(o)&&o();else if(s(u[l]))if("loading"===u[l])h(r)&&r();else{var c=u[l][0];j>0&&j--,h(c)&&c(u[l][1])}else{if("loading"!==u[l])h(r)&&r(),u[l]="loading",j++,(k(n)?Promise.resolve(n):n()).then(function(n){setTimeout(function(){u[l]=[t,n],e.forceReRender(a),b()&&!a&&window.dispatchEvent(new CustomEvent("Lazy_Component_Rendered",{detail:{key:l}}))},i||0)}).catch(function(n){console.error(n),u[l]="error",e.forceReRender(a),b()&&!a&&window.dispatchEvent(new CustomEvent("Lazy_Component_Error",{detail:{key:l}}))})}},V=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"div";v=!0;var o="";if(t)for(var i=Object.keys(t),l=0;l<i.length;l++){var a=i[l];t[a].id=t[a].id||e+"_"+a}p[e]?o=!0:(n(t),o=f.slice(0),p[e]=o),v=!1,E(r,{id:e+"-block",class:"karbon-block"},{key:e},o,t),"toString"===L&&n(t),P(),f.length=0};return{renderRootComponent:function(e,n,t){L=t,D(e,n)},component:D,getKeyedNodes:function(){return l},getKeyedNodesPrev:function(){return y},setKeyedNodesPrev:function(){y=Object.assign({},l),w(l)},getVDomNodesArray:function(){return t},resetVDomNodesArray:function(){t.length=0},getLazyCount:function(){return j},getBlockCache:function(){return p}}},L=function(e){for(var n=e.props,t=Object.keys(n),r="xml"===e.lang,o=function(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,r),i=function(e,i){var a=t[e],c=n[a];if(v(c))if(s(c.length))if("class"===a){var d,u=c.filter(Boolean);if(u.length>0)(d=o.classList).add.apply(d,l(u))}else if("o"===a[0]&&"n"===a[1])o[a]=function(e){return c[0].apply(null,[].concat(l(c.slice(1)),[e]))};else for(var p=0;p<c.length;p++){var h=c[p].split("=");o.setAttribute("data-"+h[0],h[1]||"")}else for(var g=Object.keys(c),y=0;y<g.length;y++){var m=g[y];o[a][m]=c[m]}else"text"===a?o.textContent=c:"class"===a?f(c)&&(o.className=c):s(o[a])&&!r?o[a]=c:o.setAttribute(a,c)},a=0,c=t.length;a<c;a++)i(a);return o},P=function(e){var n=document.createDocumentFragment(),t=[n],r=0;return e.map(function(e){e.level===r?t.length=t.length-1:e.level<r&&(t.length=t.length-(r-e.level));var n=L(e);t[t.length-1].appendChild(n),t[t.length]=n,r=e.level}),n},E=function(e,n){for(var t=[],r=[],o=Object.keys(n),i=Object.keys(e),l=void 0,a=void 0,c=0;c<o.length;c++)a=n[l=o[c]],s(e[l])?g(a)?A(a,e[l])||(t[t.length]=l,r[r.length]=a):v(a)?N(a,e[l])||(t[t.length]=l,r[r.length]=a):a!==e[l]&&(t[t.length]=l,r[r.length]=a):(t[t.length]=l,r[r.length]=a);for(var d=0;d<i.length;d++){var u=i[d];-1===o.indexOf(u)&&("innerHTML"!==u?(t[t.length]=u,r[r.length]="data"===u?[]:""):(t.unshift(u),r.unshift("")))}return{props:t,values:r}},D={radio:!0},R={should:null,action:null,keyedAction:null,untrackedHtmlNodes:null,props:null,values:null},V=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];R.should=e,R.action=n,R.keyedAction=t,R.untrackedHtmlNodes=i,R.props=r,R.values=o},H=function(e,n,t){switch(e){case"class":if(t.removeAttribute(e),m(n)&&f(n))t.className=n;else if(g(n)&&n.length>0){var r;(r=t.classList).add.apply(r,l(n.filter(Boolean)))}break;case"style":for(var o=Object.keys(n),i="",c=0;c<o.length;c++){var d=o[c];s(n[d])&&(i+=d+":"+n[d]+"; ")}f(i)?t.style.cssText=i:t.removeAttribute(e);break;case"text":if(t.hasChildNodes()){var u=t.firstChild;s(u.data)?u.data=n:t.insertBefore(document.createTextNode(n),u)}else t.textContent=n;break;case"data":for(var p=0;p<t.attributes.length;p++)/^data-/i.test(t.attributes[p].name)&&(t.removeAttribute(t.attributes[p].name),p--);for(var h=0;h<n.length;h++){var v=n[h].split("=");t.setAttribute("data-"+v[0],v[1]||"")}break;default:"o"===e[0]&&"n"===e[1]?m(n)?t[e]=null:g(n)?t[e]=function(e){return n[0].apply(null,[].concat(l(n.slice(1)),[e]))}:t[e]=function(e){return n.apply(null,[e])}:a(t[e])||t instanceof SVGElement?t.setAttribute(e,n):!function(e){return""===e}(n)?t[e]=n:(t[e]=!1,t.removeAttribute(e))}},M={type:null,lang:null,props:null,level:void 0,key:!1,keyedAction:null,keyedChildren:null,staticChildren:!1,parentComponent:null,parentComponentIndex:null,subscribesTo:null,dom:null,block:!1,blockProps:void 0,blockChild:!1},B=Object.assign({},M,{keyedAction:"recycled"});function K(e,n,t,r,o){var l=[],c=[],u=0,p=0,f=n.length-1,h=e.length-1;function v(e,n){if(s(n)&&r[n.key]){n.keyedAction="insertOld",l[l.length]=n,c[c.length]=r[n.key];var o=K(r[n.key].keyedChildren,n.keyedChildren,t,r),a=i(o,2),f=a[0],h=a[1];c=c.concat(f),l=l.concat(h),p+=s(e)&&d(e.keyedChildren)?e.keyedChildren.length+1:0,u=u+n.keyedChildren.length+1,delete r[n.key]}else n.keyedAction="insertNew",l[l.length]=n,c[c.length]=M,u++}function g(e){e.block?o[e.key]=!1:e.blockChild&&e.keyedChildren.map(function(e){e.block&&(o[e.key]=!1)})}function y(e,n){a(e)||s(n)&&e.level<n.level?n.key?v(e,n):(c[c.length]=M,l[l.length]=n,u++):a(n)||s(e)&&e.level>n.level?e.key&&!r[e.key]&&t[e.key]?function(e){l[l.length]=B,c[c.length]=e,p=p+e.keyedChildren.length+1}(e):(l[l.length]=M,c[c.length]=e,p++,g(e)):e.key?e.key===n.key?function(e,n){n.keyedAction="updateAttrs",l[l.length]=n,c[c.length]=e,u++,p++,delete r[n.key]}(e,n):t[e.key]?v(e,n):function(e){l[l.length]=M,c[c.length]=e,p=p+e.keyedChildren.length+1,g(e)}(e):n.key?(l[l.length]=M,c[c.length]=e,p++):(l[l.length]=n,c[c.length]=e,u++,p++)}for(;u<=f||p<=h;)y(e[p],n[u]);return[c,l]}var U,I=function(e,n,t,r,o,i,l,u,p){var f=void 0,h="child",v=void 0,g=null,y=null,m=null,k=a(r)?-1:d(r.props)?r.level:l.level,b=a(o)?void 0:d(o.props)?o.level:u.level;return e>0&&(k<p?(f="parent",h="child"):k>p?(f="child",h="parent"):(f="child",h="sibling"),s(l)&&c(r.props)&&d(l.props)&&(m="removed")),e<n.length-1&&(v=b<p?"parent":b>p?"child":"sibling",c(o.props)?y="removed":s(u)&&c(u.props)&&(y="add")),c(t.props)?g="removed":s(i)&&c(i.props)&&(g="add"),{previous:f,current:h,next:v,action:g,actionNext:y,actionPrev:m,nextNodeLevel:b}},z={},_=[],G=[],$=void 0,q=void 0,F=void 0,Q=void 0,J=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,ee=void 0,ne=void 0,te=void 0,re=void 0,oe=void 0,ie=void 0,le=void 0,ae=void 0,se=void 0,ce=function(e){return G[e]},de=function(e,n){switch(e.current){case"parent":G[n]++;break;case"child":G[n]=0;break;case"sibling":G[n]++}},ue=function(e,n,t){for(var r=0;r<e.length;r++)H(e[r],n[r],t)},pe=function(e){for(var n=Object.keys(e.values),t=0;t<n.length;t++){var r=n[t],o=e.values[r],i=E(e.props[r],o),l=i.props,a=i.values;l.length>0&&(ie++,ue(l,a,document.getElementById(o.id)))}},fe=function(){if(re=function(e,n,t,r,o,i,l){if(e.block&&n.block)return(!c(n.keyedAction)||!a(n.blockProps)&&!N(e.blockProps,n.blockProps))&&("insertOld"===n.keyedAction?V(!0,"handleKeyedUpdate","insertOld",e.blockProps,n.blockProps,!0):V(!0,"handleKeyedUpdate","runBlockUpdates",e.blockProps,n.blockProps,!0),R);var u=e.props,p=n.props,f=!0,h=!1,v=!1,g=!1;if(f=!(n.type!==e.type||c(u)||c(p)||d(n.keyedAction))&&N(u,p),(r||o)&&i>l)return"removed"!==t.action&&("insertNew"===n.keyedAction?V(!0,"handleKeyedUpdate","insertNew"):V(!0,"newNode"),R);if(f)return!1;if(d(u)&&d(p)){if(s(p.innerHTML)&&(h=!0),D[u.type]&&u.type===p.type&&(g=!0),!1===n.key&&!1===e.key||!d(n.keyedAction)||(v=!0),(n.type!==e.type||h||g)&&!v)return V(!0,"replaceNode",void 0,void 0,void 0,h),R;var y=E(u,p),m=y.props,k=y.values;return v?(V(!0,"handleKeyedUpdate",n.keyedAction,m,k),R):(V(!0,"updateNode",void 0,m,k),R)}return c(u)&&d(p)?(s(p.innerHTML)&&(h=!0),"insertNew"===n.keyedAction?V(!0,"handleKeyedUpdate","insertNew",void 0,void 0,h):V(!0,"newNode",e.keyedAction,void 0,void 0,h),R):!(!d(u)||!c(p))&&("recycled"===n.keyedAction?"recycled":"recyclable"===n.keyedAction?(V(!0,"recyclable"),R):(V(!0,"removeNode"),R))}(Z,Y,ne,$,q,ee,Q),ee<=Q&&($=!1,q=!1),re.should){switch(F&&G[ee]++,re.action){case"updateNode":W=Z.dom,Y.dom=W,ue(re.props,re.values,W),ie++;break;case"newNode":W=L(Y),Y.dom=W,J.appendChild(W),ie++;break;case"replaceNode":W=L(Y),Y.dom=W,f=J,h=W,v=Z.dom,s(v)&&d(v)?f.replaceChild(h,v):f.appendChild(h),$=!0,Q=ee,ie++;break;case"removeNode":var e=Z.dom;p(e)&&(J.removeChild(e),e=null,G[ee]--,q=!0,Q=ee,ie++);break;case"recyclable":a(z[Z.key])?z[Z.key]=!0:G[ee]--;break;case"handleKeyedUpdate":var n=J.children[ce(ee)],t=Z.dom,r=re.keyedAction;W=t,"runBlockUpdates"===r?d(re.props)&&pe(re):"insertNew"===r?(W=L(Y),Y.block&&W.appendChild(P(Y.block)),J.insertBefore(W,n),ie++):"insertOld"===r?(J.insertBefore(t,n),z[Y.key]=!0,ie++,Y.block?d(re.props)&&pe(re):re.props.length>0&&ue(re.props,re.values,W)):s(n)&&!n.isEqualNode(t)?(o=J,i=n,(u=(l=t).nextSibling)===i?o.insertBefore(i,l):o.insertBefore(l,i),s(i)&&o.insertBefore(i,u),z[Y.key]=!0,ie++,Y.block?d(re.props)&&pe(re):re.props.length>0&&ue(re.props,re.values,W)):"updateAttrs"===r&&re.props.length>0&&(ue(re.props,re.values,W),ie++),Y.dom=W}F=!(!re.untrackedHtmlNodes||"child"!==ne.next||"removed"===ne.actionNext)}else Y.dom=Z.dom,W=Y.dom,"recycled"===re&&G[ee]--;var o,i,l,u,f,h,v},he=function(e,n,t,r,o,i,l,u){$=!1,q=!1,F=!1,Q=null,J=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,ee=void 0,ne=void 0,te=!1,re=void 0,oe=0,ie=0,le=!1,ae=void 0,se=null,w(z),_.length=0,G.length=0,O.isInitialized()&&O.requiresSync()&&(ae=function(e,n,t,r,o){var i=void 0;if(0===e.length)for(var l=0;l<n.length;l++)e[l]=M;else i=K(n,e,t,r,o);return{domNodes:i[1],domNodesPrev:i[0]}}(n.slice(0),t,o,i,u),n=ae.domNodes,t=ae.domNodesPrev);for(var p=0,f=n.length;p<f;p++)if((le||O.getDomUpdatesLimit()===ie)&&(le=!0),le)Y=n[p],Z=t[p],Y.dom=Z.dom,W=Y.dom;else{if(Y=n[p],Z=t[p],a(Y))break;if(ee=Y.level||Z.level,ne=I(p,n,Y,n[p-1],n[p+1],Z,t[p-1],t[p+1],ee),de(ne,ee),0!==p?s(X)&&ee===oe?J=X:(J=_[_.length-1],X=J):(J=e,_[0]=J),O.isInitialized()||l){if(l&&(Z.dom=J.children[ce(ee)]),te=!1,se=Y.subscribesTo||Z.subscribesTo,s(r)&&d(se)&&!te){for(var h=0;h<se.length;h++)if(r.indexOf(se[h])>-1){te=!0;break}}else c(se)||(te=!0);te?fe():Z.parentComponent===Y.parentComponent&&d(Y.props)&&d(Z.props)&&!$&&!q&&Y.type===Z.type&&"insertOld"!==Y.keyedAction?(Y.dom=Z.dom,W=Y.dom):fe()}else W=L(Y),J.appendChild(W),Y.dom=W,Y.block&&W.appendChild(P(Y.block));"child"===ne.next&&"removed"!==ne.action?_[_.length]=W:"parent"===ne.next&&_.splice(ne.nextNodeLevel,ee-ne.nextNodeLevel),oe=ee}},ve=function(e){for(var n="",t=void 0,r=void 0,o=[],i=0,l=e.length;i<l;i++){t=e[i],r=e[i+1],n+="<"+t.type;if(Object.keys(t.props).filter(function(e){return"text"!==e&&"o"!=e[0]&&"n"!=e[1]}).forEach(function(e){if("style"===e){n+=' style="';var r=Object.keys(t.props.style);r.forEach(function(e,o){n+=e+":"+t.props.style[e]+";",o!==r.length-1&&(n+=" ")}),n+='"'}else Array.isArray(t.props[e])?"data"===e?t.props.data.forEach(function(e){n+=" data-"+e}):"class"===e&&t.props.class.forEach(function(e){n+=" "+e}):n+=" "+e+'="'+t.props[e]+'"'}),T[t.type])n+="/>";else if(o.push(t.type),n+=">",t.props.text&&(n+=t.props.text),t.props.innerHTML&&(n+=t.props.innerHTML),r){if(r.level===t.level)n+="</"+o.pop()+">";else if(r.level<t.level)for(var a=t.level-r.level,s=0;s<=a;s++)n+="</"+o.pop()+">"}else for(var c=o.length,d=0;d<c;d++)n+="</"+o.pop()+">"}return n},ge=void 0,ye=[],me=function(e,n){var t=e.runTime[n],r=e.toStringAsyncResolve[n];(ge=s(ge)?ge:{})[n]=s(ge[n])?ge[n]:j(t,e.appGlobalActions[n]);var o=ge[n];if(o.renderRootComponent({$$_appRootView:e.appView[n]},{props:t.getState()},"toString"),r&&0===o.getLazyCount())r(ve(o.getVDomNodesArray()));else{if(!r)return ve(o.getVDomNodesArray());o.resetVDomNodesArray()}},ke=function(e,n,t,r,o,i){var l=e.runTime[n];(ge=s(ge)?ge:{})[n]=s(ge[n])?ge[n]:j(l,e.appGlobalActions[n]);var a=ge[n];a.renderRootComponent({$$_appRootView:e.appView[n]},{props:l.getState()},"creatingHydrationLayer"),0!==a.getLazyCount()?a.resetVDomNodesArray():(ye=a.getVDomNodesArray().slice(0),be(e,n,t,r,o,i,!0))},be=function(e,n,t,r,o,i,l){var a=e.runTime[n],c=e.appGlobalActions[n],d=e.appOnInit[n],u=void 0;!t||l?(u=ge[n],ye=u.getVDomNodesArray().slice(0),u.resetVDomNodesArray()):((ge=s(ge)?ge:{})[n]=j(a,c),u=ge[n],O.setInitialized(!1),O.setSync(!1)),u.setKeyedNodesPrev(),u.renderRootComponent({$$_appRootView:e.appView[n]},{props:a.getState()},"toDom"),he(e.appContainer[n],u.getVDomNodesArray(),ye,r,u.getKeyedNodes(),u.getKeyedNodesPrev(),l,u.getBlockCache()),t||l?(h(d)&&d(c),O.setInitialized(!0),O.setSync(!0)):a.exeQueuedMsgs(void 0,o,void 0,i)},we=(U={},{addEvent:function(e,n,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];U[t]={fun:function(e){r.apply(null,[].concat(l(o),[e]))},el:e,name:n},e.addEventListener(n,U[t].fun)},removeEvent:function(e,n,t){e.removeEventListener(n,U[t].fun),delete U[t]},getCache:function(){return U},setCache:function(e,n){U[e]=n}}),Ae={runTime:{},appContainer:{},appView:{},appGlobalActions:{},appSubs:{},appOnInit:{},renderToString:{},toStringAsyncResolve:{},process:{},appCounter:0,render:function(e){this.init(e,!1,"render")},hydrate:function(e){this.init(e,!1,"hydrate")},toString:function(e){return this.init(e,!0,"string")},toStringAsync:function(e){var n=this;return new Promise(function(t){n.toStringAsyncPromise=new Promise(function(t){n.init(e,!0,"toStringAsync",t)}),n.toStringAsyncPromise.then(function(e){t(e)})})},init:function(e,n,t,r){this.appCounter++;var o=this.appCounter;if(this.renderToString[o]=n,this.toStringAsyncResolve[o]=r,this.process[o]=t,this.appContainer[o]=b()?e.container(document):null,this.appSubs[o]=e.subscriptions,this.runTime[o]=x(this,o),this.runTime[o].setState(e.state),this.appView[o]=e.view,this.appGlobalActions[o]=this.initGlobalActions(e.actions,this.runTime[o]),this.appOnInit[o]=e.init,b()&&this.runHandleSubs(o),n)return me(this,o);"hydrate"===this.process[o]?(this.process[o]="render",ke(this,o,!0)):(this.appContainer[o].innerHTML="",be(this,o,!0))},initGlobalActions:function(e,n){return function(e,n){var t={},r=function(e){var r=Object.keys(e)[0];t[r]=e[r]({stamp:n.stamp,msgs:n.messages})};if(s(e)){if(g(e))for(var o=0;o<e.length;o++)r(e[o]);else r(e);return t}}(e,n)},handleSubs:function(e,n){!function(e,n,t){for(var r=function(n){var t=e[n],r=g(t.action)?t.action[0]:t.action,o=we.getCache();t.action&&a(r.name)&&Object.defineProperty(r.prototype,"name",{get:function(){return/function ([^(]*)/.exec(this+"")[1]}}),r=g(t.action)?function(e){var n;return(n=t.action)[0].apply(n,l(t.action.slice(1)).concat([e]))}:t.action;var i=(t.key||"")+r.name+"_"+(t.name||"sub-key").toString().replace(/\s/g,"");if(t.key=i,t.name)if(h(t.name))if(t.when||a(t.when)&&!t.watch||t.watch&&!o[t.key])a(o[t.key])&&we.setCache(t.key,{when:t.when,watch:t.watch,unmount:t.name(r,t.options)});else{var s=o[t.key];s&&(!1===t.when?(h(s.unmount)&&s.unmount(),delete o[t.key]):t.watch&&t.watch!==s.watch&&(h(s.unmount)&&s.unmount(),s.watch=t.watch,t.name(r,t.options)))}else m(t.name)&&(t.when||a(t.when)?a(o[t.key])&&we.addEvent(t.el||window,t.name,i,r,g(t.action)?t.action.slice(1):void 0):o[t.key]&&we.removeEvent(t.el||window,t.name,i));else a(t.when)&&a(t.watch)?r():t.when||t.watch?(t.when||a(t.when)&&!t.watch||t.watch&&!o[t.key])&&(o[t.key]={when:t.when,watch:t.watch,unmount:null},r()):o[t.key]&&(!1===t.when?delete o[t.key]:t.watch&&t.watch!==o[t.key].watch&&(o[t.key].watch=t.watch,r()))},o=0;o<e.length;o++)r(o)}(e,0,this.appTap)},runHandleSubs:function(e){h(this.appSubs[e])&&this.handleSubs(this.appSubs[e](this.runTime[e].getState(),this.appGlobalActions[e]),e)},reRender:function(e,n,t,r,o){o?ke(this,t,!0):"render"===this.process[t]?be(this,t,!1,e,n,r):this.renderToString[t]&&"toStringAsync"===this.process[t]&&me(this,t)}},Ce=Ae.render.bind(Ae),Se=Ae.hydrate.bind(Ae),Ne=Ae.toString.bind(Ae),Oe=Ae.toStringAsync.bind(Ae);return e.render=Ce,e.hydrate=Se,e.toString=Ne,e.toStringAsync=Oe,e}({});
